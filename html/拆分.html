<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--   -->
<!--<meta charset="UTF-8">-->
<!--    <title>Document</title>-->
<!--</head>-->
<!--<body>-->
<!--<canvas id="myCanvas" width="1000" height="500">-->
<!--Your browser does not support the HTML5 canvas tag.-->
<!--</canvas>-->
<!--<script>-->
<!--// 准备img对象-->
<!--var img = new Image();-->
<!--img.src = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2350171032,3227234175&fm=26&gp=0.jpg';-->
<!--console.log("s", img.src)-->
<!--// 加载图片-->
<!--img.onload = function () {-->
<!--console.log("d")-->

<!--//准备canvas对象-->
<!--var canvas = document.getElementById("myCanvas");-->
<!--var ctx = canvas.getContext("2d");-->
<!--// 绘制图片-->
<!--ctx.drawImage(img, 0, 0);-->
<!--// 绘制水印-->
<!--ctx.font = "20px microsoft yahei";-->
<!--ctx.fillStyle = "rgba(0,0,0,1)";-->
<!--ctx.fillText("my images", 100, 100);-->
<!--console.log(canvas)-->
<!--}-->
<!--</script>-->
<!--</body>-->


<!--22222222222222222222222222-->

<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--<meta http-equiv="X-UA-Compatible" content="chrome=IE8">-->
<!--<meta http-equiv="Content-type" content="text/html;charset=UTF-8">-->
<!--<title>Canvas Clip Demo</title>-->
<!--</head>-->
<!--<body>-->
<!--<canvas id="text_canvas" height="300" width="300"></canvas>-->
<!--</body>-->
<!--<script>-->

<!--var canvas = document.getElementById("text_canvas");-->
<!--var context = canvas.getContext("2d");-->
<!--context.fillStyle ="red";-->
<!--context.lineWidth = 1;-->
<!--context.beginPath();-->
<!--context.moveTo(50,250);-->
<!--context.bezierCurveTo(150,50,350,450,450,250);-->
<!--context.stroke();-->
<!--context.fill();-->

<!--canvas.toBlob(function(blob) {-->

<!--var a = document.createElement("a");-->
<!--var body = document.getElementsByTagName("body");-->
<!--document.body.appendChild(a);-->
<!--a.download = "img" + ".jpg";-->
<!--a.href = window.URL.createObjectURL(blob);-->
<!--a.click();-->
<!--body.removeChild("a");-->

<!--});-->

<!--</script>-->

<!--</html>-->


<!--33333333-->

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="chrome=IE8">
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>Canvas Clip Demo</title>
</head>
<body>
<canvas id="text_canvas" height="300" width="300">sdjakdkjahdkj</canvas>
<img src="" alt="" id="img1">

<script>


    var c = document.getElementById("text_canvas");
    var ctx = c.getContext("2d");
    var imgData = ctx.createImageData(300, 300);
    var img1 = document.getElementById("img1");
    // for (var i = 0; i < imgData.data.length; i += 4) {
    //     g = Math.floor((i * i + 4 * i + 30) % 255)
    //     imgData.data[i + 0] = g;
    //     imgData.data[i + 1] = g;
    //     imgData.data[i + 2] = 255;
    //     imgData.data[i + 3] = 255;
    // }
    ctx.putImageData(imgData, 0, 0)
    var imgsrc = c.toDataURL();

    var img = new Image();
    img.src = imgsrc;
    console.log("s", img.src)
    // 加载图片
    img.onload = function () {
        console.log("d")
// 绘制图片
        ctx.drawImage(img, 0, 0);
// 绘制水印
        ctx.font = "20px microsoft yahei";
        ctx.fillStyle = "rgba(0,0,0,1)";
        ctx.fillText("my images", 100, 100);
    }
    img1.src = imgsrc
</script>
</body>
</html>